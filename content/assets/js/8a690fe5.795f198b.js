"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[1315],{3905:function(e,t,n){n.d(t,{Zo:function(){return u},kt:function(){return m}});var r=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var c=r.createContext({}),s=function(e){var t=r.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},u=function(e){var t=s(e.components);return r.createElement(c.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,a=e.originalType,c=e.parentName,u=i(e,["components","mdxType","originalType","parentName"]),d=s(n),m=o,k=d["".concat(c,".").concat(m)]||d[m]||p[m]||a;return n?r.createElement(k,l(l({ref:t},u),{},{components:n})):r.createElement(k,l({ref:t},u))}));function m(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=n.length,l=new Array(a);l[0]=d;var i={};for(var c in t)hasOwnProperty.call(t,c)&&(i[c]=t[c]);i.originalType=e,i.mdxType="string"==typeof e?e:o,l[1]=i;for(var s=2;s<a;s++)l[s]=n[s];return r.createElement.apply(null,l)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"},1290:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return i},contentTitle:function(){return c},metadata:function(){return s},toc:function(){return u},default:function(){return d}});var r=n(7462),o=n(3366),a=(n(7294),n(3905)),l=["components"],i={sidebar_position:2},c="Running via Docker Compose",s={unversionedId:"getting-started/install/running-locally-docker",id:"getting-started/install/running-locally-docker",isDocsHomePage:!1,title:"Running via Docker Compose",description:"In this article we will explore how you can set up Netflix Conductor on your local machine using Docker compose.",source:"@site/docs/getting-started/install/running-locally-docker.md",sourceDirName:"getting-started/install",slug:"/getting-started/install/running-locally-docker",permalink:"/content/docs/getting-started/install/running-locally-docker",editUrl:"https://github.com/orkes-io/docs/edit/main/docs/getting-started/install/running-locally-docker.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"tutorialsSideBarV2",previous:{title:"Running Conductor Locally",permalink:"/content/docs/getting-started/install/running-locally"},next:{title:"Running First Workflow",permalink:"/content/docs/getting-started/run/running-first-workflow"}},u=[{value:"Prerequisites",id:"prerequisites",children:[]},{value:"Steps",id:"steps",children:[{value:"Potential problems",id:"potential-problems",children:[]}]}],p={toc:u};function d(e){var t=e.components,i=(0,o.Z)(e,l);return(0,a.kt)("wrapper",(0,r.Z)({},p,i,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"running-via-docker-compose"},"Running via Docker Compose"),(0,a.kt)("p",null,"In this article we will explore how you can set up Netflix Conductor on your local machine using Docker compose.\nThe docker compose will bring up the following:"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Conductor API Server"),(0,a.kt)("li",{parentName:"ol"},"Conductor UI"),(0,a.kt)("li",{parentName:"ol"},"Elasticsearch for searching workflows")),(0,a.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Docker: ",(0,a.kt)("a",{parentName:"li",href:"https://docs.docker.com/get-docker/"},"https://docs.docker.com/get-docker/")),(0,a.kt)("li",{parentName:"ol"},"Recommended host with CPU and RAM to be able to run multiple docker containers (at-least 16GB RAM)")),(0,a.kt)("h2",{id:"steps"},"Steps"),(0,a.kt)("h4",{id:"1-clone-the-conductor-code"},"1. Clone the Conductor Code"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"$ git clone https://github.com/Netflix/conductor.git\n")),(0,a.kt)("h4",{id:"2-build-the-docker-compose"},"2. Build the Docker Compose"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"$ cd conductor\nconductor $ cd docker\ndocker $ docker-compose build\n")),(0,a.kt)("h4",{id:"note-conductor-supplies-multiple-docker-compose-templates-that-can-be-used-with-different-configurations"},"Note: Conductor supplies multiple docker compose templates that can be used with different configurations:"),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"File"),(0,a.kt)("th",{parentName:"tr",align:null},"Containers"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"docker-compose.yaml"),(0,a.kt)("td",{parentName:"tr",align:null},"1. In Memory Conductor Server 2. Elasticsearch 3. UI")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"docker-compose-dynomite.yaml"),(0,a.kt)("td",{parentName:"tr",align:null},"1. In Memory Conductor Server 2. Elasticsearch 3. UI 4. Dynomite Redis for persistence")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"docker-compose-postgres.yaml"),(0,a.kt)("td",{parentName:"tr",align:null},"1. In Memory Conductor Server 2. Elasticsearch 3. UI 4. Postgres persistence")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"docker-compose-prometheus.yaml"),(0,a.kt)("td",{parentName:"tr",align:null},"Brings up Prometheus server")))),(0,a.kt)("h4",{id:"3-run-docker-compose"},"3. Run Docker Compose"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"docker $ docker-compose up\n")),(0,a.kt)("p",null,"Once up and running, you will see the following in your Docker dashboard:"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Elasticsearch"),(0,a.kt)("li",{parentName:"ol"},"Conductor UI"),(0,a.kt)("li",{parentName:"ol"},"Conductor Server")),(0,a.kt)("p",null,"You can access all three on your browser to verify that it is running correctly:"),(0,a.kt)("p",null,"Conductor Server URL: ",(0,a.kt)("a",{parentName:"p",href:"http://localhost:8080/swagger-ui/index.html?configUrl=/api-docs/swagger-config"},"http://localhost:8080/swagger-ui/index.html?configUrl=/api-docs/swagger-config")),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"Conductor Server Home Page",src:n(3127).Z})),(0,a.kt)("p",null,"Conductor UI URL: ",(0,a.kt)("a",{parentName:"p",href:"http://localhost:5000/"},"http://localhost:5000/")),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"Conductor Server Home Page",src:n(7483).Z})),(0,a.kt)("h3",{id:"potential-problems"},"Potential problems"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Not enough memory",(0,a.kt)("ol",{parentName:"li"},(0,a.kt)("li",{parentName:"ol"},"You will need at least 16 GB of memory to run everything. You can modify the docker compose to skip using\nElasticsearch if you have no option to run this with your memory options."),(0,a.kt)("li",{parentName:"ol"},"To disable Elasticsearch using Docker Compose - follow the steps listed here: ",(0,a.kt)("strong",{parentName:"li"},"TODO LINK")))),(0,a.kt)("li",{parentName:"ol"},"Elasticsearch fails to come up in arm64 based CPU machines",(0,a.kt)("ol",{parentName:"li"},(0,a.kt)("li",{parentName:"ol"},"As of writing this article, Conductor relies on 6.8.x version of Elasticsearch. This version doesn't have an\narm64 based Docker image. You will need to use Elasticsearch 7.x which requires a bit of customization to get up\nand running   "))),(0,a.kt)("li",{parentName:"ol"},"Elasticsearch remains in Yellow health",(0,a.kt)("ol",{parentName:"li"},(0,a.kt)("li",{parentName:"ol"},"When you run Elasticsearch, sometimes the health remains in Yellow state. Conductor server by default requires\nGreen state to run when indexing is enabled. To work around this, you can use the following property:\n",(0,a.kt)("inlineCode",{parentName:"li"},"conductor.elasticsearch.clusteHealthColor=yellow")," Reference: ",(0,a.kt)("a",{parentName:"li",href:"https://github.com/Netflix/conductor/issues/2262"},"Issue 2262"))))))}d.isMDXComponent=!0},7483:function(e,t,n){t.Z=n.p+"assets/images/conductorUIHome-43a60a50fb08d641d475771e0325a584.png"},3127:function(e,t,n){t.Z=n.p+"assets/images/swagger-470870974ea8f30dd3e48fd684aad4e4.png"}}]);